<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>webstat</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- CSS dependencies -->
    <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap.min.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
    </style>

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body>

<div class="tabbable">
  <div id="navbar"></div>
  <div class="container tab-content" id="content"></div>
</div>

<!--  -->
<!-- Mustache templates -->
<!--  -->
<script id="tpl_freenodes" type="text/template">
<table class="table table-striped">
    <thead>
        <tr>
            <th>custer</th>
            <th>name</th>
            <th>load</th>
            <th># procs</th>
            <th># running</th>
        </tr>
    </thead>
    <tbody>
        {{#data}}
        <tr>
            <td>{{cluster}}</td>
            <td>{{name}}</td>
            <td>{{load}}</td>
            <td>{{n_procs}}</td>
            <td>{{n_running}}</td>
        </tr>
        {{/data}}
    </tbody>
</table>
</script>

<script id="tpl_navbar" type="text/template">
<div class="navbar nav-tabs navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="brand" href="#">:webstat:</a>
      <div class="nav-collapse collapse">
        <ul class="nav">
          {{#clusters}}
            <li {{#active}}class="active"{{/active}}>
              <a data-toggle="tab" id="nav-{{name}}" href="#{{name}}">{{name}}</a>
            </li>
          {{/clusters}}
        </ul>
        <form class="navbar-form  pull-right">
          <button type="submit" class="btn btn-primary">Refresh</button>
        </form>
    
      </div><!--/.nav-collapse -->
    </div>
  </div>
</div>
</script>


<script id="tpl_content" type="text/template">
{{#clusters}}
<div class="tab-pane{{#active}} active{{/active}}" id="{{name}}">
  <div class="page-header">
    <h1>{{name}}</h1>
  </div>
  <div class="row"> <!-- first row -->
    <div class="span4">
      <h2>Nodes</h2>
      <div class="chart1"></div>
    </div>
    <div class="span4">
      <h2>Procs</h2>
      <div class="chart2"></div>
    </div>
    <div class="span4">
      <h2>Heading</h2>
      <div class="chart3"></div>
    </div>
  </div> <!-- first row -->
  <div class="row">
    <div class="span8">
      <div class="nodetable"></div>
    </div>
    <div class="span4">
      <h2>Extra Space</h2>
    </div>
  </div> <!-- second row -->
</div>
{{/clusters}}
</script>
<!--  -->
<!-- Done with mustache templates -->
<!--  -->


<!-- Javascript dependences -->
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.2/underscore-min.js"></script>
<script src="http://ajax.cdnjs.com/ajax/libs/mustache.js/0.3.0/mustache.min.js"></script>
<script type="text/javascript" src="assets/main2.js"></script>

<script type="text/javascript"> google.load("visualization", "1", {packages:["corechart"]}) </script>
<!-- serve actual static files: -->
<!-- <script src="static/main.js"></script> -->
<!-- serve coffeescript compiled on the fly: -->


<!-- <script type="text/javascript">
render = function(template_id, destination_id, data) {
  tpl = $(template_id).html();
  html = Mustache.to_html(tpl, data);
  $(destination_id).html(html)
  
}

clusters = ['vsp-compute', 'a'];


$(document).ready(function (){
  data = {clusters: [{name: 'vsp-compute', active: false},
    {name: 'a', active: true}]}
    
  render("#tpl_navbar", "#navbar", data);
  render("#tpl_content", "#content", data);
});



google.load("visualization", "1", {packages:["corechart"]});
google.setOnLoadCallback(drawChart);
draw_tab = function(tab_name, data, options) {
  element1 = $('#'+tab_name+' .chart1')
  element2 = $('#'+tab_name+' .chart2')
  element3 = $('#'+tab_name+' .chart3')
  var chart1 = new google.visualization.PieChart(element1[0]);
  var chart2 = new google.visualization.PieChart(element2[0]);
  var chart3 = new google.visualization.PieChart(element3[0]);
  chart1.draw(data, options);
  chart2.draw(data, options);
  chart3.draw(data, options);
}

function drawChart() {
  var data = google.visualization.arrayToDataTable([
    ['Task', 'Hours per Day'],
    ['Work',     11],
    ['Eat',      2],
    ['Commute',  2],
    ['Watch TV', 2],
    ['Sleep',    7]
  ]);

  var options = {
    chartArea: {'width': '100%', 'height': '80%'},
    //backgroundColor: 'magenta',
    legend: {'position': 'right'}
  };
  
  element = $('a[href|="#a"]').click(function(e) {
      e.preventDefault();
      $(this).tab('show');
      draw_tab('a', data, options);

  });
  
    element = $('a[href|="#vsp-compute"]').click(function(e) {
      e.preventDefault();
      $(this).tab('show');
      draw_tab('vsp-compute', data, options);
  });

}
</script> -->
</body>
</html>
